title: 用某里226滑块测试补环境框架
date: 2023-08-12 17:48:11
tags:
    - 滑块
    - 补环境
    - x82y
    - 逆向
    - JavaScript
    - AST
categories:
---
两年前，去了某里的同事发来一个滑块，是他们所在的团队维护的，让我试试能不能通过校验。但那时我对补环境还不是很熟悉，某里的控制流也没能还原，硬刚太累了，业务上也没有需求，就只好放在收藏夹中吃灰。

去年学习了蔡老板的9大节点合并算法，能还原221版本的滑块代码，但代码量实在是太多了，一个case里塞进去2万多行代码，没有耐心看下去，于是继续吃灰。

今年，某里滑块已经有人均的趋势，圈子里已经卷到飞起，00后已经开始乱杀。自己业务上也没有前些年紧张，于是可以腾出手来搞一搞。此前已经能生成226的签名，但就是过不去，也不知道错在哪里。最近正好[时光佬](https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzIxNjQ2NzM3MA==&scene=124#wechat_redirect)也在搞滑块，开始佬也写了篇分析[226的文章](https://mp.weixin.qq.com/s/Py7I6RG7UT9EtdpXlV98aA)，在他们的帮助下很快就搞好了普通226滑块。此时我才知道，上一次生成226签名时就差临门一脚。

真正的挑战来自于某里系旗下网站的滑块，这些滑块圈子里一般称之为x82y。虽然代码和226是一样的，但校验更严格。此时才真正开始看226的代码，和浏览器对比，大大小小有35处不一致的地方，只好一个一个排查，排查的过程中，才知道自己的补环境框架的缺陷，才知道自己的补环境方法不合理的地方，是时候回炉重造了。好在目前应付普通226滑块就够用了，x82y等有需要了再慢慢搞了。

其实不补环境，扣算法的话，也是可以的，某里滑块离谱的是代码是固定的，能够通过AST还原代码的话，搞起来容易很多。

一直都只在国内反爬圈里打转，某里滑块是迄今为止遇到的检验最多的js反爬了，如果想测试自己补环境框架的强度，某里滑块是首选。
