title: 给补环境框架增加dom树解析功能
date: 2023-05-28 21:03:05
tags:
    - 补环境
    - dom
    - 逆向
    - cheerio
categories:
---
关于dom树解析功能，本来想着套用jsdom，但jsdom太大了，于是看jsdom底层如何实现dom树解析，发现是使用的parse5，从parse5的相关项目中又知道了cheerio, 于是想着如何套到框架里。后来从蔡老板和风佬的补环境课程里学了一手dom树解析后，把之前的补环境框架中dom树解析相关代码更新了下，简化了很多代码。dom树相关的操作如createElement, appendChild，childNodes也不再是硬编码了，框架也变得通用一些。这就挺好的，虽然执行速度上慢了一些，也不像浏览器的dom树操作那样完备，但通用性已经大大增强。

于是拿着这个补环境框架锤子到处锤一锤，反正不用细细研究加密逻辑，花不了太多时间。锤rsvmp，把之前的服务升级了一下，简化了下代码。锤某里225，目前的情况是能生成token但过不去，估计补的不对，225主要不是刚需，就先放一放。后续有时间了，还是先锤一下某里的140才行，循序渐进，正好140有哲哥现成的AST还原代码，补不对的时候可以对着代码看一看，而225的还原没有现成的，得自己写AST还原插件。

蔡老板和风佬的补环境课程还是值得一学的。
