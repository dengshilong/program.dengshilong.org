title: 用补环境框架测试某yd验证码
date: 2023-08-27 09:15:57
tags:
    - 补环境框架
    - 验证码
    - 逆向
    - JavaScript
categories:
---
最近和yd验证码看对眼了，于是决定锤一锤它。在锤它之前先看了[十一姐](https://mp.weixin.qq.com/s/tVBNYlQg34GxNzE3RPI57w)和[y小白](https://mp.weixin.qq.com/s/JBGW1CsAbLh_Ogs3xLfIfg)的文章，再参考[小白佬](https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=Mzg5NTY3MTc2Mg==&scene=124#wechat_redirect)的例子，就开始干活了。具体要搞定哪一些参数，直接看十一姐的文章好了，十一姐的文章目前是我看到的最详细的，实在是太细了，我这里就只讲讲我遇到的一些坑点。

代码有一万多行，ob风格的混淆，但因为[蔡老板的星球](https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzAwNTY1OTg0MQ==&scene=124#wechat_redirect)一直提供ob解混淆脚本的原因，我已经是个ob废物了，用脚本跑了下，没有还原出来，估计是版本不一致的原因，于是只好硬刚了。在掏出补环境框架之前，先尝试手动抠了一份生成cb参数的代码，虽然生成的参数能用，但还是有些麻烦，于是决定用补环境来解决。先拿官网的例子练练手，因为官网参数会少一些，会更简单。站在大佬们的肩膀上，很快就搞定了。

然后去测试具体网站，这时就开始遇到问题了，先是生成的fp参数不能用，慢慢排查后才发现location还用的是官网的地址，改过来后就好了。然后又遇到个现象，能获取两次验证码，第三次就不行了，隔一段时间又能获取两次验证码，第三次就不行了，百思不得其解，问了一圈道友都没有遇到过这种情况。于是只好一个个接口，一个个参数慢慢排查，排查了好几天，最后发现是验证码校验接口cb参数没有动态生成，就离谱。

明明记得这个参数改成动态生成了，但事实就是没改，估计是记忆错乱了，把改过官网的代码记成具体网站了。除了这个问题，全程再没有遇到其它坑点。

像这种代码是固定的网站，是真的好搞，补环境也是真的香，即便现在所有接口都跑通了，我都不知道它这混淆代码写的都是些啥。

最近十一姐和时光佬搞了个[星球](https://mp.weixin.qq.com/s/K78l4MhZoXRUvlgJcUuCKw)，值得一看。
