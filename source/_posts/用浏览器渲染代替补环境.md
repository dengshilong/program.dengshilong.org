title: 用浏览器渲染代替补环境
date: 2025-09-21 19:27:08
tags:
    - 自动化
    - 补环境
    - 浏览器
categories:
---
声明: 本文章中所有内容仅供学习交流使用，不用于其他任何目的，不提供完整代码。抓包内容、敏感网址、数据接口等均已做脱敏处理，严禁用于商业用途和非法用途，否则由此产生的一切后果均与作者无关！若有侵权，请在公众号 【静夜随想】 联系作者立即删除！

在看了土木佬的 [某数反爬方案讨论](https://mp.weixin.qq.com/s?__biz=MzI1MjE1NjIyMw==&mid=2650862008&idx=1&sn=62c14e5ca3ec959b961af96789dbc682&scene=21&poc_token=HFbhz2ijmmqcVhTPRaW6dZwqC2K75I5A5f0hQAa5) 后，也想搞一个浏览器渲染的方案。之前同事研究cef的时候，就想让他搞一个，但他没继续研究了，这次正好补上。

在 https://github.com/dengshilong/browser_server/blob/main/node_playwright_server/simple_server.js 代码的基础上，继续问AI，

Playwright的配置参数里，有解决自动化检测的参数吗？AI又哼哧哼哧给了一大堆建议，其中建议有以下一条，加上之后进行测试。

```
browser = playwright.chromium.launch(
    args=[
        "--disable-blink-features=AutomationControlled",  # 关键参数，隐藏自动化控制标识
        "--no-sandbox",
        "--disable-setuid-sandbox"
    ]
)
```

会遇到获取cookies时还未生成的情况，于是又让AI加上等待cookies不为空之后再返回结果功能，之后就可以测试了。

先试了加速乐，搞定。再试了下vmp + wasm里生成的某乎__zse_ck，搞定。再试了下某数，也搞定。

浏览器用来补环境是真舒服了, 就是生成速度比纯js补环境慢一些。
