title: 瑞数反爬之去除debugger
date: 2020-05-10 19:25:23
tags:
    - 爬虫
categories:
---
最近几周都在折腾爬虫，想着还是需要做一些记录，给后来人一些参考。

本以为爬虫会比较简单，万万没想到爬虫的路上，总会遇到一些事情。接到的第一个任务就是商标，打开chrome, 打开开发者工作，就一直卡在debugger中，而且这个vm文件不是下载下来的，而是通过js文件生成的, 第一个拦路虎出现了。查了之后，才知道很多政府网站的反爬虫都是瑞数做的，知道了瑞数就是爬虫领域的一座山。

想去除debugger, 并在js文件执行第一行就加上debugger，但在网上找了很多种办法，都没有达到理想的状态。最终，同事给了一种很好的解决办法，那就是使用代理，将服务端返回的文件进行替换。

同事说，他想到了这个办法，但用了好几天的时间才摸索出最佳的解决方案, 那就是使用Charles这种代理，把服务器返回的HTML页面进行替换。

下载了Charles, 同事指出生成vm文件的地方，添加重写规则，达到了预期的效果，可以开始愉快的调试。于是买了Charles的注册码，200多块钱，终身使用，很便宜了。同事说他还在用破解版，很惭愧了。在我看来吧，这是时间的价值吧，毕竟是程序员花了很多心血开发出来的好产品了，对得起这个价格。

同事还是厉害了，毕业3年，靠着自己折腾，跑通了整个抓取流程，后生可畏啊。

很多朋友担心做爬虫会不会进局子，在我看来，爬取通过人工就可以获取到的信息，违法犯罪的概率还是很低了，不用太多担心，毕竟已经存在很多商业化的公司在爬取这些数据了。
